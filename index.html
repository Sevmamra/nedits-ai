<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Nedits AI — Demo</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  :root{
    --bg:#0b0d11; --panel:#0f1419; --muted:#93a0b3; --text:#e6eef8;
    --accent:#7c3aed; --accent-2:#22d3ee;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial}
  body{
    background:
      radial-gradient(900px 500px at 10% -10%, rgba(124,58,237,.08), transparent 40%),
      radial-gradient(700px 400px at 110% 10%, rgba(34,211,238,.06), transparent 40%),
      var(--bg);
    color:var(--text); display:flex; flex-direction:column;
  }
  header{
    display:flex; align-items:center; gap:12px; padding:14px 16px;
    background:linear-gradient(180deg, rgba(12,14,18,.8), rgba(12,14,18,.6));
    border-bottom:1px solid rgba(124,58,237,.12); position:sticky; top:0; z-index:20;
  }
  .logo{width:36px;height:36px;border-radius:9px;
    background:conic-gradient(from 200deg,var(--accent),var(--accent-2),var(--accent));
    box-shadow:0 6px 24px rgba(124,58,237,.12)}
  .brand{font-weight:700;font-size:16px}
  .sub{color:var(--muted); font-size:13px}
  main{flex:1; overflow:auto;padding:20px; display:flex; flex-direction:column; gap:12px; align-items:flex-start}
  .bubble{display:flex; gap:12px; max-width:880px; width:100%;}
  .bubble.right{margin-left:auto;flex-direction:row-reverse}
  .avatar{width:36px;height:36px;border-radius:10px;background:#0b1116;
    display:grid;place-items:center;border:1px solid rgba(255,255,255,.03);
    font-weight:700;color:var(--muted)}
  .avatar.ai{background:linear-gradient(160deg,#0f1620,#091018); color:#cfe8ff}
  .msg{padding:12px 14px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(255,255,255,.02));
    border:1px solid rgba(255,255,255,.03);white-space:pre-wrap;word-break:break-word; color:var(--text)}
  .bubble.right .msg{background:linear-gradient(160deg, rgba(124,58,237,.12), rgba(34,211,238,.06)); border:1px solid rgba(124,58,237,.18)}
  .typing-dots{display:flex;gap:6px}
  .dot{width:7px;height:7px;border-radius:50%;background:#b8c7ff;opacity:.5;animation:blink 1.2s infinite}
  .dot:nth-child(2){animation-delay:.15s}.dot:nth-child(3){animation-delay:.3s}
  @keyframes blink{0%,80%,100%{opacity:.2}40%{opacity:1}}
  .composer{position:sticky; bottom:0; background:linear-gradient(180deg, rgba(11,13,17,.2), rgba(11,13,17,.95));
    padding:14px; border-top:1px solid rgba(124,58,237,.06); display:flex; gap:10px; align-items:flex-end}
  textarea{flex:1; min-height:54px; max-height:240px; resize:none; padding:12px;border-radius:10px;
    border:1px solid rgba(255,255,255,.04); background:linear-gradient(180deg,#0b1116,#0b1014);
    color:var(--text); font-size:15px}
  .send{padding:12px 16px;border-radius:10px;border:none;
    background:linear-gradient(135deg,var(--accent),#5b21b6); color:white;font-weight:700;cursor:pointer;transition:all .2s}
  .send:hover{opacity:0.9; transform:translateY(-1px)}
  .center-note{max-width:920px;margin:0 auto;text-align:center;color:var(--muted);
    font-size:12px;margin:8px 0 14px}
  @media (max-width:760px){ main{padding:12px} }
</style>
</head>
<body>

<header>
  <div class="logo" aria-hidden="true"></div>
  <div>
    <div class="brand">Nedits AI</div>
    <div class="sub">Your Nedits Edition assistant — guiding customers</div>
  </div>
</header>

<main id="chat" aria-live="polite"></main>

<div class="composer">
  <textarea id="input" placeholder="Type your message… (Enter to send, Shift+Enter for newline)"></textarea>
  <button class="send" id="sendBtn">Send ▸</button>
</div>

<div class="center-note">Powered by Nedits Edition — AI Demo</div>

<script>
const API_KEY = "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"; 
const API_URL = "https://api.groq.com/openai/v1/chat/completions";

const SYSTEM_PROMPT = `You are Nedits AI, ... (same system prompt as before)`;

const chatEl = document.getElementById('chat');
const inputEl = document.getElementById('input');
const sendBtn = document.getElementById('sendBtn');

function addBubble(role, text) {
  const wrap = document.createElement('div');
  wrap.className = 'bubble' + (role === 'user' ? ' right' : '');
  const avatar = document.createElement('div');
  avatar.className = 'avatar ' + (role === 'ai' ? 'ai' : '');
  avatar.textContent = role === 'user' ? 'You' : 'AI';
  const msg = document.createElement('div');
  msg.className = 'msg';
  msg.textContent = text;
  wrap.appendChild(avatar);
  wrap.appendChild(msg);
  chatEl.appendChild(wrap);
  chatEl.scrollTop = chatEl.scrollHeight;
}

function addTyping() {
  const wrap = document.createElement('div');
  wrap.className = 'bubble';
  const avatar = document.createElement('div');
  avatar.className = 'avatar ai';
  avatar.textContent = 'AI';
  const msg = document.createElement('div');
  msg.className = 'msg';
  const dots = document.createElement('div');
  dots.className = 'typing-dots';
  dots.innerHTML = '<span class="dot"></span><span class="dot"></span><span class="dot"></span>';
  msg.appendChild(dots);
  wrap.appendChild(avatar);
  wrap.appendChild(msg);
  chatEl.appendChild(wrap);
  chatEl.scrollTop = chatEl.scrollHeight;
  return wrap;
}

async function sendMessage() {
  const text = inputEl.value.trim();
  if (!text) return;
  addBubble('user', text);
  inputEl.value = '';
  inputEl.style.height = 'auto';

  if (!API_KEY) {
    addBubble('ai', '⚠️ API key missing. Please set your API_KEY in the code.');
    return;
  }

  const typingNode = addTyping();
  sendBtn.disabled = true;

  try {
    const body = {
      model: "llama-3.1-8b-instant",
      messages: [{ role: "system", content: SYSTEM_PROMPT },{ role: "user", content: text }],
      temperature: 0.6
    };

    const res = await fetch(API_URL, {
      method: 'POST',
      headers: {'Authorization': `Bearer ${API_KEY}`,'Content-Type': 'application/json'},
      body: JSON.stringify(body)
    });

    const data = await res.json();
    typingNode.remove();
    const assistantText = data?.choices?.[0]?.message?.content || "⚠️ No response";
    addBubble('ai', assistantText);
  } catch (err) {
    typingNode.remove();
    addBubble('ai', `⚠️ Network error: ${err.message}`);
  } finally {
    sendBtn.disabled = false;
    chatEl.scrollTop = chatEl.scrollHeight;
  }
}

sendBtn.addEventListener('click', sendMessage);
inputEl.addEventListener('keydown', (e) => {
  if (e.key === 'Enter' && !e.shiftKey) {
    e.preventDefault();
    sendMessage();
  }
});

addBubble('ai', '👋 Welcome to Nedits AI — I can explain Nedits Edition services, recommend solutions, and guide you.');
</script>
</body>
</html>
